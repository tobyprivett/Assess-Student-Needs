- @page_header = link_to_group

%span.glyphicon.glyphicon-triangle-left
=link_to 'Lessons', group_lessons_path(@group)
%p= assessment_display_type_name

%dl#assessment_details.dl-horizontal
  %dt Group
  %dd= link_to @assessment.group.name, group_path(@assessment.group)

  - if lesson?
    %dt Date
    %dd= @assessment.lesson_datetime || '&nbsp;'.html_safe

    %dt Objective
    %dd= @assessment.name
  - else
    %dt Notes
    %dd= @assessment.notes

%dl.dl-horizontal
  %dt Level
  %dd.level #{ @assessment.indicator.level }

  %dt Strand
  %dd.strand #{ @assessment.indicator.strand_name }

  %dt Indicator
  %dd.indicator_name #{ @assessment.indicator.name }

  - if description = @assessment.indicator.description
    %dt Description
    %dd.muted.description #{ description.gsub("_ ", "<br/>").html_safe }

= link_to "Scoring View", group_assessment_path(@group, @assessment)
|
= link_to "Report View", group_assessment_path(@group, @assessment, mode: 'report')
|
= link_to "Edit Details & Students ", edit_group_assessment_path(@group, @assessment)

%p

%table.table
  %tbody
    %tr
      %th Student
      %th Notes / Score
      %th Accomplishment
    - if params['mode'] == 'report'
      - @assessment_students.sort{ |a,b| a.score.to_i <=> b.score.to_i }.each do |assessment_student|
        = render :partial => 'student_read_only', locals: { assessment_student: assessment_student }
    - else
      - @assessment_students.sort{|ls| ls.student.name <=> ls.student.name }.each do |assessment_student|
        = render :partial => 'student', locals: { assessment_student: assessment_student }
