= render partial: 'students/tabs', locals: { activate: "indicator_#{ @indicator.id }" }

%h3
  Progress:
  = @indicator

- @indicator.leaves.each do |leaf|
  - next unless leaf.is_a?(Indicators::Objective)
  .panel.panel-default.objective
    .panel-body
      %table.table.table-condensed
        %tbody
          %tr
            %td.col-xs-2.text-muted Topic
            %td #{ leaf.topic }
          %tr
            %td.text-muted Objective
            %td #{ leaf.objective }
      - objective = leaf
      - assessments = Assessment.by_indicator(objective).by_student(@student)
      - unless assessments.empty?
        %table.table
          %thead
            %th.col-xs-2 Date
            %th.col-xs-2 Teacher
            %th Score

          - assessments.each do |assessment|
            - if assessment.assessor.is_a?(Lesson)
              %tr.activity
                %td= assessment.assessor.lesson_date
                %td= assessment.assessor.teacher.name
                %td= render partial: 'assessments/progress_bar', locals: { assessment: assessment }

            - else
              .activity


      SHOULD BE @indicator.objectives
